--- src/octoprint/templates/dialogs/usersettings.jinja2.orig	2017-12-12 11:42:40 UTC
+++ src/octoprint/templates/dialogs/usersettings.jinja2
@@ -5,7 +5,7 @@
     </div>
     <div class="modal-body">
         <ul class="nav nav-pills">
-            {% set mark_active = True %}
+            {% set mark_active = [True] %}
             {% for key in templates.usersettings.order %}
                 {% set entry, data = templates.usersettings.entries[key] %}
                 {% if data is none %}
@@ -14,7 +14,7 @@
                     {% if "custom_bindings" not in data or data["custom_bindings"] %}<!-- ko allowBindings: false -->{% endif %}
                     <li id="{{ data._div }}_link"
                         {% if "data_bind" in data %}data-bind="{{ data.data_bind }}"{% endif %}
-                        class="{% if mark_active %}active{% set mark_active = False %}{% endif %} {% if "classes_link" in data %}{{ data.classes_link|join(' ') }}{% elif "classes" in data %}{{ data.classes|join(' ') }}{% endif %}"
+                        class="{% if mark_active[0] %}active{% do mark_active.pop() %}{% do mark_active.append(False) %}{% endif %} {% if "classes_link" in data %}{{ data.classes_link|join(' ') }}{% elif "classes" in data %}{{ data.classes|join(' ') }}{% endif %}"
                             {% if "styles_link" in data %} style="{{ data.styles_link|join(', ') }}" {% elif "styles" in data %} style="{{ data.styles|join(', ') }}" {% endif %}
                             >
                         <a href="#{{ data._div }}" data-toggle="tab">{{ entry|e }}</a>
@@ -25,14 +25,14 @@
         </ul>
 
         <div class="tab-content">
-            {% set mark_active = True %}
+            {% set mark_active = [True] %}
             {% for key in templates.usersettings.order %}
                 {% set entry, data = templates.usersettings.entries[key] %}
                 {% if data is not none %}
                     {% if "custom_bindings" not in data or data["custom_bindings"] %}<!-- ko allowBindings: false -->{% endif %}
                     <div id="{{ data._div }}"
                          {% if "data_bind" in data %}data-bind="{{ data.data_bind }}"{% endif %}
-                         class="tab-pane {% if mark_active %}active{% set mark_active = False %}{% endif %} {% if classes_content in data %}{{ data.classes_content|join(' ') }}{% elif classes in data %}{{ data.classes|join(' ') }}{% endif %}"
+                         class="tab-pane {% if mark_active[0] %}active{% do mark_active.pop() %}{% do mark_active.append(False) %}{% endif %} {% if classes_content in data %}{{ data.classes_content|join(' ') }}{% elif classes in data %}{{ data.classes|join(' ') }}{% endif %}"
                             {% if "styles_content" in data %} style="{{ data.styles_content|join(', ') }}" {% elif styles in data %} style="{{ data.styles|join(', ') }}" {% endif %}
                             >
                          {% try "There was an error with the template {filename} at line number {lineno}: {exception}" %}{% include data.template ignore missing %}{% endtry %}
